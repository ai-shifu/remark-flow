ci:
  skip: [eslint]  # Skip ESLint hooks in pre-commit.ci since not work
repos:
-   repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v6.0.0
    hooks:
    -   id: check-yaml
    -   id: check-json
    -   id: check-merge-conflict
    -   id: check-symlinks
    -   id: end-of-file-fixer
        exclude: ^package-lock\.json$
    -   id: trailing-whitespace
        exclude: ^package-lock\.json$
    -   id: pretty-format-json
        args: ['--autofix', '--indent=2', '--no-ensure-ascii']
        files: \.(json)$
        exclude: ^package-lock\.json$
    -   id: requirements-txt-fixer
-   repo: https://github.com/commitizen-tools/commitizen
    rev: v4.8.3  # use latest stable version
    hooks:
    -   id: commitizen
        stages: [commit-msg]
        additional_dependencies: ['markupsafe==2.0.1']
-   repo: local
    hooks:
    -   id: prettier
        name: Prettier
        entry: prettier
        language: node
        files: ^src/.*\.(js|jsx|ts|tsx|mjs|cjs|css|scss|md|json)$
        args: ['--write']
        additional_dependencies: ['prettier@^3.6.2']
        pass_filenames: true
    -   id: eslint
        name: ESLint
        entry: bash -c 'npx eslint --fix --max-warnings 0 $(echo "$@" | tr " " "\n" | grep -E "\.(js|jsx|ts|tsx)$") || true' --
        language: system
        files: ^src/.*\.(js|jsx|ts|tsx)$
        pass_filenames: true
    -   id: typescript-check
        name: TypeScript type check
        entry: npx tsc --noEmit
        language: system
        files: \.ts$
        pass_filenames: true
    -   id: jest-tests
        name: Run Jest tests
        entry: npm test -- --findRelatedTests
        language: system
        files: \.(ts|js)$
        pass_filenames: true
